
<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  �������������������������������������������������� -->
  <meta charset="utf-8">
  <title>Artificial Neural Network</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  �������������������������������������������������� -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  �������������������������������������������������� -->
 <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600'  rel='stylesheet' type='text/css'>

  <!-- CSS
  �������������������������������������������������� -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/custom.css">

  <!-- Scripts
  �������������������������������������������������� -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  <script src="js/site.js"></script>

  <!-- Favicon
  �������������������������������������������������� -->
  <link rel="icon" type="image/png" href="dist/images/favicon.png">





<style>

</style>






</head>

<body class="code-snippets-visible">

  <!-- Primary Page Layout
  �������������������������������������������������� -->
  <div class="container">


    <div class="navbar-spacer"></div>
   <nav class="navbar">
      <div class="container">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="#intro">Home</a></li>
          <li class="navbar-item">
            <a class="navbar-link" href="#" data-popover="#codeNavPopover">MLB API</a>
            <div id="codeNavPopover" class="popover">
              <ul class="popover-list">
                <li class="popover-item">
                  <a class="popover-link" href="#intro">Intro</a>
                </li>
                <li class="popover-item">
                  <a class="popover-link" href="#json">JSON Response</a>
                </li>
                <li class="popover-item">
                  <a class="popover-link" href="#client">Node Client</a>
                </li>
              </ul>
            </div>
          </li>
          <li class="navbar-item"><a class="navbar-link" href="neuralnetwork.html">Artificial Neural Network</a></li>
        </ul>
      </div>
    </nav>

 
          <!-- Why use-->
          <div class="docs-section" style="padding-top: 6rem;padding-bottom: 3rem;" id="intro">
              <h3>Artificial Neural Network</h3>
              <p>The following code is a three layer neural network written in Python and NumPy.  This was my first shot at programming a neural network, so there are likely a ton of issues with it. I wanted to build it from scratch so I could attempt to understand and conceptualize the math involved.  </br></br></p>


		<div id="json">
                <h5 style={{marginBottom: 0}} >Sample JSON response:</h5>
		<pre>{"games":[{"time":"3:10 PM ET","weather":" Wind 4 MPH In ","away":{"name":"St. Louis Cardinals","record":"80-71","HA":"Away","pitcher":{"name":"Luke Weaver","pitcherHand":"R","pitcherRecord":"1-3","pitcherEra":"3.21"},"lineup":[{"player":"Matt Carpenter","ID":"572761","position":"1B","bats":"L","batting":1},{"player":"Aledmys Diaz","ID":"649557","position":"SS","bats":"R","batting":2},{"player":"Jedd Gyorko","ID":"576397","position":"3B","bats":"R","batting":3},{"player":"Brandon Moss","ID":"461235","position":"LF","bats":"L","batting":4},{"player":"Randal Grichuk","ID":"545341","position":"CF","bats":"R","batting":5},{"player":"J. Hazelbaker","ID":"571757","position":"RF","bats":"L","batting":6},{"player":"Carson Kelly","ID":"608348","position":"C","bats":"R","batting":7},{"player":"Kolten Wong","ID":"543939","position":"2B","bats":"L","batting":8},{"player":"Luke Weaver","ID":"596133","position":"P","bats":"R","batting":9}]},"home":{"name":"Colorado Rockies","record":"72-79","HA":"Away","pitcher":{"name":"German Marquez","pitcherHand":"R","pitcherRecord":"0-0","pitcherEra":"5.06"},"lineup":[{"player":"C. Blackmon","ID":"453568","position":"CF","bats":"L","batting":1},{"player":"DJ LeMahieu","ID":"518934","position":"2B","bats":"R","batting":2},{"player":"Carlos Gonzalez","ID":"471865","position":"RF","bats":"L","batting":3},{"player":"Nolan Arenado","ID":"571448","position":"3B","bats":"R","batting":4},{"player":"Gerardo Parra","ID":"467827","position":"1B","bats":"L","batting":5},{"player":"Tom Murphy","ID":"608596","position":"C","bats":"R","batting":6},{"player":"J. Patterson","ID":"641958","position":"LF","bats":"L","batting":7},{"player":"Daniel Descalso","ID":"518614","position":"SS","bats":"L","batting":8},{"player":"German Marquez","ID":"608566","position":"P","bats":"R","batting":9}]}}]};
		</pre></div>
	      
		<div class="docs-section" style={intro} id="runScript">
		<h5 style={{marginBottom: 0}} >Run Script:</h5>
		<pre><code> def Train(self):
        global weights0,weights1,layer1_deltaPrev,layer2_deltaPrev
        for iter in xrange(self.trainingIterations):
	     
            layer0 = self.TrainingIn
	    if(self.shuffle):
	    	np.random.shuffle(layer0)

            layer1 = self.nonlin(np.dot(layer0,self.weights0))

            if(self.biasLayer1TF):
                self.biaslayer1 = np.ones(layer1.shape[0])
                layer1=np.column_stack((layer1,self.biaslayer1))
            if(self.dropout):
                layer1 *= np.random.binomial([np.ones((layer1.shape[0],layer1.shape[1]))],1-self.dropoutPercent)[0] * (1.0/(1-self.dropoutPercent))
            
            layer2 = self.nonlin(np.dot(layer1,self.weights1))
            
            if(self.miniBtch_StochastGradTrain):
                self.layer1_delta,self.layer2_delta=self.MiniBatchOrStochasticGradientDescent()
                self.layer2_deltaPrev=self.layer2_delta
                self.layer1_deltaPrev=self.layer1_delta
            else:

                layer2_error = self.TrainingOut - layer2
                self.layer2_delta = layer2_error*self.nonlin(layer2,deriv=True)*self.learningRate+self.momentum*self.layer2_deltaPrev
                self.layer2_deltaPrev=self.layer2_delta
		
                layer1_error = self.layer2_delta.dot(self.weights1.T)
                self.layer1_delta = layer1_error * self.nonlin(layer1,deriv=True)*self.learningRate+self.momentum*self.layer1_deltaPrev
                self.layer1_deltaPrev=self.layer1_delta
    
            self.weights1 += layer1.T.dot(self.layer2_delta)
            if(self.biasLayer1TF):
                self.weights0 += layer0.T.dot(self.layer1_delta.T[:-1].T)
            else:
                self.weights0 += layer0.T.dot(self.layer1_delta)
            
    
            if (iter% 20) == 0:
                self.CalculateValidationError()
		
                if(self.minimumValidationError<0.01):
                    break
		</code></pre>









              <div class="docs-section" style={intro} id="client">
                  <h5 style={{marginBottom: 0}} >Sample NodeJs Client:</h5>
		  	<pre><code>var request = require('request');
var http = require('http');
var callback = function(response){
   var body = '';
   response.on('data', function(data) {
      body += data;
   });
   
   response.on('end', function() {
	if(body!=null){
	    	print(body);
	}

   });
}
request({
    url: "http://localhost:3000/api/authenticate",
    method: "POST",
    json: true,   // <--Very important!!!
    body: {
	name:'Admin',
        password:'qwerty1'
    }
}, function (error, response, body){
    	if(error){console.log(error)}


	var options = {
	    host: 'localhost',
	    port: '3000',
	    path:'/api/lineupsFromTestPage',
	    headers: {
		    'x-access-token':response.body.token,
		    "Content-Type": "application/json"
	    }
	 };
	var req = http.request(options, callback);
	req.end();

});
			</code></pre>
              </div>








<!-- End Document
  �������������������������������������������������� -->
</body>
</html>
